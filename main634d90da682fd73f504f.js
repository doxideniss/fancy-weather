!function(e){function t(t){for(var r,c,i=t[0],u=t[1],s=t[2],f=0,d=[];f<i.length;f++)c=i[f],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&d.push(o[c][0]),o[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);d.length;)d.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==o[u]&&(r=!1)}r&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},o={0:0},a=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var i=window.webpackJsonp=window.webpackJsonp||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var l=u;a.push([125,1]),n()}({122:function(e){e.exports=JSON.parse('{"placeholder":"Введите город","search":"поиск","feel":"Ощущается как:","wind":"Ветер:","ms":"м/с","humidity":"Влажность:","day":["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],"dayReduction":["Вc","Пн","Вт","Ср","Чт","Пт","Сб"],"month":["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"],"lat":"Широта","lng":"Долгота","error":"Нет такого места"}')},123:function(e){e.exports=JSON.parse('{"placeholder":"Enter city","search":"search","feel":"Feels like:","wind":"Wind:","ms":"m/s","humidity":"Humidity:","day":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dayReduction":["Sun","Mond","Tue","Wed","Th","Fr","Sat"],"month":["January","February","March","April","May","June","July","August","September","October","November","December"],"lat":"Latitude","lng":"Longitude","error":"There is no such place"}')},124:function(e){e.exports=JSON.parse('{"placeholder":"Увядзіце горад","search":"пошук","feel":"Адчуваецца як:","wind":"Вецер:","ms":"м/с","humidity":"Вільготнасць:","day":["Нядзеля","Панядзелак","Аўторак","Серада","Чацверг","Пятнiца","Субота"],"dayReduction":["Няд","Пан","Аўт","Сер","Чац","Пят","Суб"],"month":["Студзеня","Лютага","Сакавіка","Красавіка","Мая","Чэрвеня","Ліпеня","Аўгуста","Верасеня","Кастрычніка","Лістапада","Снежаня"],"lat":"Шырата","lng":"Даўгата","error":"Няма такога месца"}')},125:function(e,t,n){n(126),n(313),e.exports=n(312)},312:function(e,t,n){},313:function(e,t,n){"use strict";n.r(t);var r=n(60),o=n.n(r);function a(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function i(e){a(c,r,o,i,u,"next",e)}function u(e){a(c,r,o,i,u,"throw",e)}i(void 0)}))}}var i={info:{},init:function(){var e=this;return c(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://ipinfo.io/json?token=".concat("8280358538600a"));case 2:return n=t.sent,t.next=5,n.json();case 5:e.info=t.sent;case 6:case"end":return t.stop()}}),t)})))()},getInfoByCity:function(e,t){return c(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://api.opencagedata.com/geocode/v1/json?q=".concat(e,"&language=").concat(t,"&key=").concat("369c40d885684d38b8634e17de76407a"));case 2:return r=n.sent,n.next=5,r.json();case 5:return o=n.sent,n.abrupt("return",o);case 7:case"end":return n.stop()}}),n)})))()}};function u(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}var s={map:null,init:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.a.accessToken="pk.eyJ1IjoiZG94aWRlbmlzcyIsImEiOiJja2F3Znc2NzUwemkzMnJwZ2hldDJodzRqIn0.J8_PI-ooneEe2sBQA_fqRQ",t.map=new o.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:i.info.loc.split(",").reverse(),zoom:9});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){u(a,r,o,c,i,"next",e)}function i(e){u(a,r,o,c,i,"throw",e)}c(void 0)}))})()},setCenter:function(e,t){this.map.setCenter([e,t]),this.setMarker(e,t)},setMarker:function(e,t){(new o.a.Marker).setLngLat([e,t]).addTo(this.map)}};function l(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d={recognition:null,speechSynthesisMSG:null,recognitionStarted:!1,init:function(){var e=this;window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition,this.recognition=new window.SpeechRecognition,this.recognition.interimResults=!0,this.speechSynthesisMSG=new SpeechSynthesisUtterance,this.recognition.addEventListener("start",(function(){e.recognitionStarted=!0}));var t=document.querySelector(".form__search-field"),n=document.querySelector(".form__mic"),r=document.querySelector(".form__search-btn");this.recognition.addEventListener("result",(function(e){var n=l(e.results).map((function(e){return e[0].transcript})).join("");t.value=n,r.click()})),this.recognition.addEventListener("end",(function(){e.recognitionStarted=!1,n.classList.remove("form__mic--active")}))},startRecognition:function(){this.recognitionStarted||this.recognition.start()},speech:function(e){this.speechSynthesisMSG.text=e,speechSynthesis.speak(this.speechSynthesisMSG)}};function p(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}var m=function(){return(e=regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.unsplash.com/photos/random?query=morning&client_id=".concat("oDyHb7xWnfpnq6lE_o7yziImN1t416CNbL8syLJbIJw"),e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r.urls.regular);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){p(a,r,o,c,i,"next",e)}function i(e){p(a,r,o,c,i,"throw",e)}c(void 0)}))})();var e};function h(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}var y=function(e,t){return(n=regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://api.weatherapi.com/v1/forecast.json?key=".concat("711751ec8b8841a986a212643200106","&q=").concat(e,"&days=").concat(4,"&lang=").concat(t));case 2:return r=n.sent,n.next=5,r.json();case 5:return o=n.sent,n.abrupt("return",o);case 7:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function c(e){h(a,r,o,c,i,"next",e)}function i(e){h(a,r,o,c,i,"throw",e)}c(void 0)}))})();var n};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){w(a,r,o,c,i,"next",e)}function i(e){w(a,r,o,c,i,"throw",e)}c(void 0)}))}}var S={ru:n(122),en:n(123),be:n(124)},x={lang:"en",unitTemp:"C",lat:0,lon:0,city:"",cityWithCountry:"",currentWeather:{dateOffset:null,time:"",tempC:0,tempF:0,wind:0,humidity:0,text:"",icon:""},weatherDays:[],map:{lat:"",lon:""},timer:null,changeBGImage:function(){return b(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:t=e.sent,document.body.style.backgroundImage="url(".concat(t,")");case 4:case"end":return e.stop()}}),e)})))()},setLang:function(e){this.lang=e,this.updateLang()},updateLang:function(){var e=this;return b(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.querySelectorAll("[data-i18n]").forEach((function(t){var n=S[e.lang][t.dataset.i18n];if("placeholder"===t.dataset.i18n)t.placeholder=n;else if(t.dataset.i18n.includes("day")){var r=e.currentWeather.date.getDay();t.dataset.day&&(r+=+t.dataset.day),r%=7,t.textContent=n[r]}else if("month"===t.dataset.i18n){var o=e.currentWeather.date.getMonth();t.textContent=n[o]}else t.textContent=n})),t.next=3,y(e.city,e.lang);case 3:return n=t.sent,t.next=6,i.getInfoByCity(e.city,e.lang);case 6:r=t.sent,e.currentWeather.text=n.current.condition.text,e.cityWithCountry="".concat(r.results[0].components.city?r.results[0].components.city:r.results[0].components.state,", ").concat(r.results[0].components.country),e.updateWeatherInfo();case 10:case"end":return t.stop()}}),t)})))()},setUnitOfTemp:function(e){var t=this;document.querySelectorAll("[data-temp]").forEach((function(n){"current"===n.dataset.temp?n.textContent=t.currentWeather["temp".concat(e)]:n.textContent=t.weatherDays[n.dataset.day-1]["temp".concat(e)]}))},setCity:function(e){var t=this;return b(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y(e,t.lang);case 2:if(!(r=n.sent).error){n.next=6;break}return alert(r.error.message),n.abrupt("return");case 6:return n.next=8,i.getInfoByCity(e,t.lang);case 8:o=n.sent,t.lat=r.location.lat,t.lon=r.location.lon,t.city=e,t.cityWithCountry="".concat(o.results[0].components.city?o.results[0].components.city:o.results[0].components.state,", ").concat(o.results[0].components.country),t.map.lat=o.results[0].annotations.DMS.lat,t.map.lon=o.results[0].annotations.DMS.lng,t.currentWeather.date=new Date((new Date).toLocaleString("en-US",{timeZone:o.results[0].annotations.timezone.name})),t.currentWeather.dateOffset=o.results[0].annotations.timezone.offset_sec/3600,t.currentWeather.tempC=r.current.temp_c,t.currentWeather.tempF=r.current.temp_f,t.currentWeather.feelC=r.current.feelslike_c,t.currentWeather.feelF=r.current.feelslike_f,t.currentWeather.wind=(1e3*r.current.wind_kph/3600).toFixed(2),t.currentWeather.humidity=r.current.humidity,t.currentWeather.text=r.current.condition.text,t.currentWeather.icon=r.current.condition.icon,t.weatherDays=[],r.forecast.forecastday.forEach((function(e){var n=e.day;t.weatherDays.push({tempC:n.avgtemp_c,tempF:n.avgtemp_f,icon:n.condition.icon})})),t.updateLang();case 28:case"end":return n.stop()}}),n)})))()},updateWeatherInfo:function(){var e=this;s.setCenter(this.lon,this.lat),document.querySelector("[data-day]").innerText=this.currentWeather.date.getDay(),document.querySelectorAll("[data-info]").forEach((function(t){var n=t.dataset.info.split("."),r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);n.forEach((function(t){r=t.includes("temp")||t.includes("feel")?r["".concat(t).concat(e.unitTemp)]:r[t]})),t.dataset.info.includes("icon")?t.src=r:t.innerText=r})),clearInterval(this.timer),this.startTime()},startTime:function(){var e=this;setInterval((function(){var t=new Date,n=t.getTime()+6e4*t.getTimezoneOffset(),r=new Date(n+36e5*e.currentWeather.dateOffset);document.querySelector("[data-time]").innerText="".concat(r.getHours(),":").concat(r.getMinutes(),":").concat(r.getSeconds())}),1e3)}};function _(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){_(a,r,o,c,i,"next",e)}function i(e){_(a,r,o,c,i,"throw",e)}c(void 0)}))}}var L=function(){var e=document.querySelector(".language-menu"),t=document.querySelector(".drop-down-menu");e.addEventListener("click",(function(){e.querySelector(".drop-down-menu").classList.toggle("drop-down-menu--open"),e.querySelector(".language-menu__arrow").classList.toggle("arrow-down--open"),e.querySelector(".language-menu__face-button").classList.toggle("language-menu__face-button--open")})),t.addEventListener("click",(function(n){n.target.classList.contains("drop-down-menu__item")&&!n.target.classList.contains("drop-down-menu__item--active")&&(e.querySelector(".language-menu__face-button > span").innerText=n.target.innerText,t.querySelectorAll(".drop-down-menu__item").forEach((function(e){e.classList.remove("drop-down-menu__item--active")})),n.target.classList.add("drop-down-menu__item--active"),x.setLang(n.target.dataset.lang))}))},k=function(){var e=document.querySelector(".button--update"),t=e.querySelector(".spinner");e.addEventListener("click",(function(){t.classList.remove("spinner"),x.changeBGImage(),t.offsetWidth,t.classList.add("spinner")}))},j=function(){var e=document.querySelector(".header__unit-temp");e.addEventListener("click",(function(t){t.target.classList.contains("button")&&t.target.classList.contains("button--inactive")&&(e.querySelectorAll("button").forEach((function(e){e.classList.add("button--inactive")})),t.target.classList.remove("button--inactive"),x.setUnitOfTemp(t.target.dataset.unit))}))},R=function(){var e=document.querySelector(".form__search-btn"),t=document.querySelector(".form__search-field");e.addEventListener("click",(function(e){e.preventDefault(),""!==t.value&&x.setCity(t.value)}))};window.onload=O(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.changeBGImage(),e.next=3,i.init();case 3:return s.init(),d.init(),L(),k(),j(),R(),e.next=11,x.setCity(i.info.city);case 11:x.setLang("en"),(t=document.querySelector(".form__mic")).addEventListener("click",(function(){d.startRecognition(),t.classList.add("form__mic--active")}));case 14:case"end":return e.stop()}}),e)})))}});